<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- Link meta tags -->
      <meta charset="UTF-8">
      <meta name="description" content="A restaurant called Little Lemon that serves Greek and Turkish style cuisines.">
      <meta name="author" content="Little Lemon Wareshop">
      <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- Link font styles -->
      <link rel="preconnect" href="https://fonts.googleapis.com">
      <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
     <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Roboto:wght@300;500&display=swap" rel="stylesheet">
    <!-- title -->
      <title>Little Lemon Wareshop</title>
    <!-- Link your CSS files -->
      <link rel="stylesheet" href="styles.css">
      <script src="script.js" defer></script>
  </head>
  
  <body>
    <header>  
      <div class="trolley">
         <a href="user.html"><img class="trolley" src="logo/profile-picture (1).png"></a>
         <a href="cart.html"><img id="cartLogo" class="trolley" src="logo/shopping-cart.png"></a>
      </div>
        <a><img class="logo" src="logo/Asset 16@4x.png"></a> 
        <div class="search-bar-position">
           <input id="input" class="search_bar" placeholder="Search" type="text"><button class="search-button">Search</button>
        </div> 
    </header>
    <div id="overlay" style="display: none;">
      <div id="message">
        <p>Please search for an item.</p>
        <button id="submitBtn">Ok</button>
      </div>
    </div>
    <div id="customAlert" class="alert-box">
        <div class="alert-content">
          <p id="alertMessage"></p>
          <button onclick="closeAlert()">OK</button>
        </div>
      </div>
    <nav>
      <ul>
        <li><a href="index.html"><button>Home</button></a></li>
        <li><a href="menu.html"><button>Menu</button></a></li>
        <li><a href="contact.html"><button>Contact us</button></a></li>
        <li><a href="order.html"><button>Order</button></a></li>
      </ul>
    </nav>
    <main>
      <script>
        const cart = JSON.parse(localStorage.getItem("cart")) || [];
        const main = document.querySelector("main");
        if(cart.length === 0){
          main.innerHTML += `<section><article><h1>Thank you for your purchase. <p>Your cart is empty!</p></h1></article></section><img src="logo/shopping-cart 1.png" alt="Empty Cart" style="display:block; margin:auto; width:200px; height:auto;">`;
        } else {
          main.innerHTML += `<section><article><h1>Your Cart (${cart.length} items)</h1></article></section>`;
        }
        const container = document.createElement("div");
        container.classList.add("cart-container");  
        cart.forEach((item, index) => {
          const div = document.createElement("div");
          div.classList.add("cart-item");
          div.innerHTML = `
            <img src="${item.image}" class="cart-image">
            <section>
                <article>
                  <h3>${item.name}</h3>
                  <p>$${item.price}</p>
              </article>
            </section>
            <button class="removeBtn" data-index="${index}">Remove</button>
          `;
          container.appendChild(div);
        });
        main.appendChild(container);
      </script>

        <section>
          <article>  
            <h1 style="margin-top: 2rem;">
              Total: $<span id="totalAmount">
                <script>
                  const totalAmount = cart.reduce((total, item) => total + item.price, 0);
                  document.getElementById("totalAmount").innerText = totalAmount.toFixed(2);
                </script>
              </span> 
            <button id="checkoutBtn" onclick="window.location.href='checkout.html'" style="font-size: 20px; padding: 10px 20px; width:fit-content; pointer-events: auto; cursor: pointer;">
             Proceed to
            Checkout
          </button>
          </article>
        </section>
    </main>
    <footer>
       <div>
        <img class="footer_logo" src="logo/Asset 20@4x.png" >
      </div>
      <div>
        <hr>
        <p class="copyright">@LittleLemon Copyright</p>
      </div>
    </footer>
  </body>
</html>